<!-- SYNTAX TEST "Packages/PackageDev/Package/TextMate Preferences/TextMate Preferences.sublime-syntax" -->
<!-- <- comment.block.xml punctuation.definition.comment.begin.xml -->
     <plist version="1.0">
<!--  ^^^^^ meta.tag.xml entity.name.tag.localname.xml -->
<!--                ^^^^^ string.quoted.double.xml -->
     <dict>
<!-- <- meta.inside-plist.plist -->
<!--       ^ meta.inside-plist.plist meta.inside-dict.plist -->
        <key>scope</key>
<!--    ^^^^^ meta.tag.xml -->
<!--     ^^^ entity.name.tag.localname.xml -->
<!--         ^^^^^ meta.inside-dict-key.plist -->
<!--              ^^ punctuation.definition.tag.begin.xml -->
<!--                ^^^ entity.name.tag.localname.xml -->
        <string>source.test</string>
<!--    ^ meta.inside-plist.plist meta.inside-dict.plist meta.tag.xml punctuation.definition.tag.begin.xml -->
<!--     ^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.tag.xml entity.name.tag.localname.xml -->
<!--           ^ meta.inside-plist.plist meta.inside-dict.plist meta.tag.xml punctuation.definition.tag.end.xml -->
<!--            ^^^^^^^^^^ meta.inside-value.string.plist meta.toc-list.scope.textmateprefs -->
<!--            ^^^^^^ string.unquoted.scope-segment.scope-selector -->
<!--                         ^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.tag.xml entity.name.tag.localname.xml -->
        <key>scope</key><!-- comment -->
<!--                    ^^^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist comment.block.xml -->
        <string><![CDATA[abc & (def - ghi & jkl)]]></string>
<!--            ^^^^^^^^^ string.unquoted.cdata.xml punctuation.definition.string.begin.xml -->
<!--                                            ^^^ string.unquoted.cdata.xml punctuation.definition.string.end.xml -->
<!--                     ^^^^^^^^^^^^^^^^^^^^^^^ meta.toc-list.scope.textmateprefs -->
<!--                         ^ keyword.operator.with.scope-selector -->
<!--                                      ^ keyword.operator.with.scope-selector -->
        <key>scope</key>
        <string>abc & (def - ghi & jkl &amp; mno)</string>
<!--                ^ invalid.illegal.bad-ampersand.xml -->
<!--                             ^ invalid.illegal.bad-ampersand.xml -->
<!--                                   ^^^^^ constant.character.entity.xml keyword.operator.with.scope-selector -->

        <key>settings</key>
        <dict>
            <key>shellVariables</key>
<!--             ^^^^^^^^^^^^^^ meta.inside-dict-key.plist meta.toc-list.shellVariables.textmateprefs -->
            <array>
                <dict>
                    <key>name</key>
                    <string>TM_COMMENT_START</string>
<!--                        ^^^^^^^^^^^^^^^^ meta.inside-value.string.plist meta.toc-list.shellVariable.name.textmateprefs -->
                    <key>value</key>
                    <string>TEST </string>
                </dict>
            </array>
        </dict>

        <key>preserveIndent</key>
<!--         ^^^^^^^^^^^^^^ meta.inside-dict-key.plist meta.toc-list.setting.textmateprefs -->
        <false />
<!--     ^^^^^ entity.name.tag.localname.xml constant.language.boolean.plist -->
        <key>decreaseIndentPattern</key>
<!--         ^^^^^^^^^^^^^^^^^^^^^ meta.inside-dict-key.plist meta.toc-list.regex.textmateprefs -->
        <string>^\s*(?i:end|else|elseif|loop|wend|next)(\s|$)</string>
<!--            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-value.string.plist meta.regex.textmateprefs -->
<!--            ^ keyword.control.anchors.regexp -->
<!--                                                           ^^^^^^ meta.tag.xml entity.name.tag.localname.xml -->
        <key>increaseIndentPattern</key>
<!--         ^^^^^^^^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-dict-key.plist meta.toc-list.regex.textmateprefs -->
        <string>example containing <bad> & characters. (?<=doh)</string>
<!--                               ^ invalid.illegal.missing-entity.xml -->
<!--                                   ^ invalid.illegal.missing-entity.xml -->
<!--                                     ^ invalid.illegal.bad-ampersand.xml -->
<!--                                                 ^ keyword.other.any.regexp -->
<!--                                                     ^ invalid.illegal.missing-entity.xml -->
        <key>increaseIndentPattern</key>
<!--         ^^^^^^^^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-dict-key.plist meta.toc-list.regex.textmateprefs -->
        <string><![CDATA[example containing <bad> & characters. (?<=doh)]]></string>
<!--                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-value.string.plist meta.regex.textmateprefs - invalid -->
<!--            ^^^^^^^^^ string.unquoted.cdata.xml punctuation.definition.string.begin.xml - meta.regex.textmateprefs -->
<!--                                                                    ^^^ string.unquoted.cdata.xml punctuation.definition.string.end.xml - meta.regex.textmateprefs -->
<!--                                                             ^^^ constant.other.assertion.regexp -->
        <key>bracketIndentNextLinePattern</key>
        <string><![CDATA[(?x)
            (?=wow) # this is a comment
<!--         ^^ constant.other.assertion.regexp -->
<!--                ^^^^^^^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-value.string.plist meta.regex.textmateprefs comment.line.number-sign.regexp -->
        ]]></string>
<!--    ^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-value.string.plist string.unquoted.cdata.xml punctuation.definition.string.end.xml -->
<!--         ^^^^^^ meta.tag.xml entity.name.tag.localname.xml -->
        <key>disableIndentNextLinePattern</key><string></string>
<!--         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-dict-key.plist meta.toc-list.regex.textmateprefs -->
<!--                                                     ^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.tag.xml entity.name.tag.localname.xml -->
        <key>indentNextLinePattern</key>
<!--         ^^^^^^^^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-dict-key.plist - meta.toc-list.regex.textmateprefs -->
<!--                              ^ meta.inside-plist.plist meta.inside-dict.plist meta.tag.xml meta.close-unknown-dict-key-tag.textmateprefs punctuation.definition.tag.begin.xml -->
        <string>not a real key</string>
<!--            ^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-value.string.plist - meta.regex.textmateprefs -->
        <key></key>
<!--         ^ meta.inside-plist.plist meta.inside-dict.plist meta.tag.xml meta.close-unknown-dict-key-tag.textmateprefs punctuation.definition.tag.begin.xml -->
        <string>not a real key</string>
<!--            ^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-value.string.plist - meta.regex.textmateprefs -->

        <key>showInSymbolList</key>
<!--         ^^^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-dict-key.plist meta.toc-list.setting.textmateprefs -->
        <integer>1</integer>text
<!--             ^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-value.integer.plist constant.numeric.plist -->
<!--                        ^^^^ meta.inside-plist.plist meta.inside-dict.plist invalid.illegal.unexpected-text.plist -->
        <key>showInIndexedSymbolList</key>
<!--         ^^^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-dict-key.plist meta.toc-list.setting.textmateprefs -->
        text<string>0</string>
<!--    ^^^^ meta.inside-plist.plist meta.inside-dict.plist invalid.illegal.unexpected-text.plist -->
<!--         ^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.tag.xml entity.name.tag.localname.xml -->
<!--                ^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-dict-key.plist constant.numeric.textmateprefs -->
        <key>symbolTransformation</key>
<!--         ^^^^^^^^^^^^^^^^^^^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-dict-key.plist meta.toc-list.regex-transform.textmateprefs -->
        <string><![CDATA[
            s/(\[[^\]]*\])|\b_\b\s*|\(.*|(\s{2,})/$1(?2 )/g; (?# this is a regex transformation
<!--        ^^ meta.inside-plist.plist meta.inside-dict.plist meta.inside-value.string.plist meta.regex.transformation.textmateprefs punctuation.definition.substitute-what.textmateprefs -->
<!--                                             ^ punctuation.definition.substitute-with.textmateprefs -->
<!--                                                 ^^ keyword.other.backref-and-recursion.conditional.regexp-replacement -->
<!--                                                     ^ punctuation.definition.substitute-flags.textmateprefs -->
<!--                                                      ^ storage.modifier.mode.regexp.transformation.textmateprefs -->
<!--                                                       ^ punctuation.definition.substitution.end.textmateprefs -->
        note that we don't end the comment, but the CDATA end still applies
        ]]></string>
<!--    ^^^ string.unquoted.cdata.xml punctuation.definition.string.end.xml -->

    </dict>
<!--  ^^^^ meta.inside-plist.plist meta.tag.xml entity.name.tag.localname.xml - invalid -->
</plist>
<!-- ^^ meta.inside-plist.plist meta.tag.xml entity.name.tag.localname.xml - invalid -->
test
<!-- <- invalid.illegal.unexpected-text.plist -->
<!-- comment -->
<!-- <- comment.block.xml punctuation.definition.comment.begin.xml -->
